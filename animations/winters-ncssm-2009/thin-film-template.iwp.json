{"author":{"username":"winters@ncssm.edu","name":{},"organization":{},"email":{}},"objects":{"time":{"start":"0.0","stop":"20.0","change":"1.0","fps":"20.0"},"GraphWindow":{"xmin":"0.0","xmax":"50.0","ymin":"0.0","ymax":"1.0","xgrid":"5.0","ygrid":"0.1"},"window":{"xmin":"-500.0","xmax":"500.0","ymin":"-500.0","ymax":"500.0","xgrid":"100.0","ygrid":"100.0","xunit":"nm","yunit":"nm"},"description":{"text":"This isn't working correctly.  The 2nd reflected ray doesn't have the right angle or length.  The corresponding refracted ray doesn't have the correct angle.\n\nA ray of light is incident from air (blue) on a thin film (yellow).  The film is deposited on a transparent medium (gray).  Light is reflected from the upper and lower surfaces of the film.  The reflected rays interfere.  (Grid units are in nanometers.)\n\nPlaying the animation will increase the thickness of the film (or wavelength) by the selected increment.  The default values for wavelength and increment will advance the wavelengths through the range of visible light.\n\nThe phase difference is calculated for the selected angle of incidence, and phase reversals on reflection are included.  Setting n of the film equal to 1 or to n of the lower medium will yield unphysical results."},"input":[{"name":"do","text":"Initial thickness of film","initialValue":"100.0","units":"nm"},{"name":"di","text":"Thickness increment","initialValue":"0.0","units":"nm"},{"name":"n1","text":"n of upper medium","initialValue":"1.0","units":{},"hidden":"1"},{"name":"n2","text":"n of film","initialValue":"1.33","units":{}},{"name":"n3","text":"n of lower medium","initialValue":"1.7","units":{}},{"name":"wo","text":"Wavelength in air","initialValue":"400.0","units":"nm"},{"name":"wi","text":"Wavelength increment","initialValue":"15.0","units":"nm"},{"name":"i","text":"Inclination","initialValue":"5.0","units":"\u00b0"},{"name":"a","text":"Angle of incident ray","initialValue":"30.0","units":"\u00b0"},{"name":"s","text":"Scale","initialValue":"500.0","units":{},"hidden":"1"}],"output":[{"name":"d","text":"Thickness of film","units":"nm","calculator":{"@attributes":{"type":"parametric"},"value":"do+di*t"}},{"name":"w","text":"Wavelength","units":"nm","calculator":{"@attributes":{"type":"parametric"},"value":"wo+wi*t"}},{"name":"slope","text":"Slope","units":{},"calculator":{"@attributes":{"type":"parametric"},"value":"tan(toRadians(i))"}},{"name":"ar","text":"Angle of refraction 1","units":"rad","calculator":{"@attributes":{"type":"parametric"},"value":"asin(n1*sin(toRadians(a))\/n2)"}},{"name":"pd","text":"Phase difference","units":{},"calculator":{"@attributes":{"type":"parametric"},"value":"2*d*n2\/(w*cos(ar))+step(n3\/n2-1)\/2-step(n2\/n1-1)\/2"}},{"name":"alpha","text":"Rotated angle","units":{},"calculator":{"@attributes":{"type":"parametric"},"value":"toRadians(i)+ar"}},{"name":"x","text":"X","units":"nm","calculator":{"@attributes":{"type":"parametric"},"value":"2*d\/(cot(alpha)-tan(toRadians(i)))"}},{"name":"y","text":"Y","units":"nm","calculator":{"@attributes":{"type":"parametric"},"value":"x*tan(toRadians(i))+d\/2"}},{"name":"art","text":"Angle of refraction 2","units":"rad","calculator":{"@attributes":{"type":"parametric"},"value":"asin(n2*sin(ar+toRadians(i))\/n3)"},"hidden":"1"}],"solid":[{"name":"medium1","shape":{"@attributes":{"type":"rectangle","drawTrails":"false","drawVectors":"false"},"vectors":{"@attributes":{"yAccel":"false","Vel":"false","xAccel":"false","yVel":"false","xVel":"false","Accel":"false"}},"width":{"calculator":{"@attributes":{"type":"parametric"},"value":"2*s"}},"height":{"calculator":{"@attributes":{"type":"parametric"},"value":"s+d"}},"graphOptions":{"@attributes":{"graphVisible":"false"},"initiallyOn":{"@attributes":{"yAccel":"false","yVel":"false","xAccel":"false","xVel":"false","yPos":"false","xPos":"false"}}}},"color":{"red":"204","green":"204","blue":"255"},"xpath":{"calculator":{"@attributes":{"type":"parametric"},"value":"0"}},"ypath":{"calculator":{"@attributes":{"type":"parametric"},"value":"s\/2-d\/2"}}},{"name":"medium2","shape":{"@attributes":{"type":"polygon","drawTrails":"false","drawVectors":"false"},"points":{"point":[{"@attributes":{"index":"0"},"xpath":{"calculator":{"@attributes":{"type":"parametric"},"value":"-s"}},"ypath":{"calculator":{"@attributes":{"type":"parametric"},"value":"d\/2-s*slope"}}},{"@attributes":{"index":"1"},"xpath":{"calculator":{"@attributes":{"type":"parametric"},"value":"s"}},"ypath":{"calculator":{"@attributes":{"type":"parametric"},"value":"d\/2+s*slope"}}},{"@attributes":{"index":"2"},"xpath":{"calculator":{"@attributes":{"type":"parametric"},"value":"s"}},"ypath":{"calculator":{"@attributes":{"type":"parametric"},"value":"-d\/2"}}},{"@attributes":{"index":"3"},"xpath":{"calculator":{"@attributes":{"type":"parametric"},"value":"-s"}},"ypath":{"calculator":{"@attributes":{"type":"parametric"},"value":"-d\/2"}}}]},"vectors":{"@attributes":{"yAccel":"false","Vel":"false","xAccel":"false","yVel":"false","xVel":"false","Accel":"false"}},"width":{"calculator":{"@attributes":{"type":"parametric"},"value":"0+0+0"}},"height":{"calculator":{"@attributes":{"type":"parametric"},"value":"0+0+0"}},"graphOptions":{"@attributes":{"graphVisible":"false"},"initiallyOn":{"@attributes":{"yAccel":"false","yVel":"false","xAccel":"false","xVel":"false","yPos":"false","xPos":"false"}}}},"color":{"red":"255","green":"255","blue":"204"},"xpath":{"calculator":{"@attributes":{"type":"parametric"},"value":"0"}},"ypath":{"calculator":{"@attributes":{"type":"parametric"},"value":"0"}}},{"name":"medium3","shape":{"@attributes":{"type":"rectangle","drawTrails":"false","drawVectors":"false"},"vectors":{"@attributes":{"yAccel":"false","Vel":"false","xAccel":"false","yVel":"false","xVel":"false","Accel":"false"}},"width":{"calculator":{"@attributes":{"type":"parametric"},"value":"2*s"}},"height":{"calculator":{"@attributes":{"type":"parametric"},"value":"s-d\/2"}},"graphOptions":{"@attributes":{"graphVisible":"false"},"initiallyOn":{"@attributes":{"yAccel":"false","yVel":"false","xAccel":"false","xVel":"false","yPos":"false","xPos":"false"}}}},"color":{"red":"204","green":"204","blue":"204"},"xpath":{"calculator":{"@attributes":{"type":"parametric"},"value":"0"}},"ypath":{"calculator":{"@attributes":{"type":"parametric"},"value":"-(d\/2+s)\/2"}}},{"name":"incidentray1","shape":{"@attributes":{"type":"line","drawTrails":"false","drawVectors":"false"},"vectors":{"@attributes":{"yAccel":"false","Vel":"false","xAccel":"false","yVel":"false","xVel":"false","Accel":"false"}},"width":{"calculator":{"@attributes":{"type":"parametric"},"value":"-s*tan(toRadians(a+i))"}},"height":{"calculator":{"@attributes":{"type":"parametric"},"value":"s"}},"graphOptions":{"@attributes":{"graphVisible":"false"},"initiallyOn":{"@attributes":{"yAccel":"false","yVel":"false","xAccel":"false","xVel":"false","yPos":"false","xPos":"false"}}}},"color":{"red":"0","green":"0","blue":"153"},"xpath":{"calculator":{"@attributes":{"type":"parametric"},"value":"0"}},"ypath":{"calculator":{"@attributes":{"type":"parametric"},"value":"d\/2"}}},{"name":"reflectedtray1","shape":{"@attributes":{"type":"line","drawTrails":"false","drawVectors":"false"},"vectors":{"@attributes":{"yAccel":"false","Vel":"false","xAccel":"false","yVel":"false","xVel":"false","Accel":"false"}},"width":{"calculator":{"@attributes":{"type":"parametric"},"value":"s*tan(toRadians(a-i))"}},"height":{"calculator":{"@attributes":{"type":"parametric"},"value":"s"}},"graphOptions":{"@attributes":{"graphVisible":"false"},"initiallyOn":{"@attributes":{"yAccel":"false","yVel":"false","xAccel":"false","xVel":"false","yPos":"false","xPos":"false"}}}},"color":{"red":"0","green":"0","blue":"153"},"xpath":{"calculator":{"@attributes":{"type":"parametric"},"value":"0"}},"ypath":{"calculator":{"@attributes":{"type":"parametric"},"value":"d\/2"}}},{"name":"refractedray1","shape":{"@attributes":{"type":"line","drawTrails":"false","drawVectors":"false"},"vectors":{"@attributes":{"yAccel":"false","Vel":"false","xAccel":"false","yVel":"false","xVel":"false","Accel":"false"}},"width":{"calculator":{"@attributes":{"type":"parametric"},"value":"d*sin(ar+toRadians(i))"}},"height":{"calculator":{"@attributes":{"type":"parametric"},"value":"-d"}},"graphOptions":{"@attributes":{"graphVisible":"false"},"initiallyOn":{"@attributes":{"yAccel":"false","yVel":"false","xAccel":"false","xVel":"false","yPos":"false","xPos":"false"}}}},"color":{"red":"0","green":"0","blue":"153"},"xpath":{"calculator":{"@attributes":{"type":"parametric"},"value":"0"}},"ypath":{"calculator":{"@attributes":{"type":"parametric"},"value":"d\/2"}}},{"name":"reflectedray2","shape":{"@attributes":{"type":"line","drawTrails":"false","drawVectors":"false"},"vectors":{"@attributes":{"yAccel":"false","Vel":"false","xAccel":"false","yVel":"false","xVel":"false","Accel":"false"}},"width":{"calculator":{"@attributes":{"type":"parametric"},"value":"x-d*tan(alpha)"}},"height":{"calculator":{"@attributes":{"type":"parametric"},"value":"y+d\/2"}},"graphOptions":{"@attributes":{"graphVisible":"false"},"initiallyOn":{"@attributes":{"yAccel":"false","yVel":"false","xAccel":"false","xVel":"false","yPos":"false","xPos":"false"}}}},"color":{"red":"0","green":"0","blue":"153"},"xpath":{"calculator":{"@attributes":{"type":"parametric"},"value":"d*sin(alpha)"}},"ypath":{"calculator":{"@attributes":{"type":"parametric"},"value":"-d\/2"}}},{"name":"refractedray2","shape":{"@attributes":{"type":"line","drawTrails":"false","drawVectors":"false"},"vectors":{"@attributes":{"yAccel":"false","Vel":"false","xAccel":"false","yVel":"false","xVel":"false","Accel":"false"}},"width":{"calculator":{"@attributes":{"type":"parametric"},"value":"s*tan(toRadians(a-i))"}},"height":{"calculator":{"@attributes":{"type":"parametric"},"value":"s"}},"graphOptions":{"@attributes":{"graphVisible":"false"},"initiallyOn":{"@attributes":{"yAccel":"false","yVel":"false","xAccel":"false","xVel":"false","yPos":"false","xPos":"false"}}}},"color":{"red":"0","green":"0","blue":"153"},"xpath":{"calculator":{"@attributes":{"type":"parametric"},"value":"x"}},"ypath":{"calculator":{"@attributes":{"type":"parametric"},"value":"y"}}},{"name":"refractedray3","shape":{"@attributes":{"type":"line","drawTrails":"false","drawVectors":"false"},"vectors":{"@attributes":{"yAccel":"false","Vel":"false","xAccel":"false","yVel":"false","xVel":"false","Accel":"false"}},"width":{"calculator":{"@attributes":{"type":"parametric"},"value":"s*sin(art)"}},"height":{"calculator":{"@attributes":{"type":"parametric"},"value":"-s"}},"graphOptions":{"@attributes":{"graphVisible":"false"},"initiallyOn":{"@attributes":{"yAccel":"false","yVel":"false","xAccel":"false","xVel":"false","yPos":"false","xPos":"false"}}}},"color":{"red":"0","green":"0","blue":"153"},"xpath":{"calculator":{"@attributes":{"type":"parametric"},"value":"d*sin(ar+toRadians(i))"}},"ypath":{"calculator":{"@attributes":{"type":"parametric"},"value":"-d\/2"}}},{"name":"phasediff","shape":{"@attributes":{"type":"rectangle","drawTrails":"false","drawVectors":"false"},"vectors":{"@attributes":{"yAccel":"false","Vel":"false","xAccel":"false","yVel":"false","xVel":"false","Accel":"false"}},"width":{"calculator":{"@attributes":{"type":"parametric"},"value":"0"}},"height":{"calculator":{"@attributes":{"type":"parametric"},"value":"1"}},"graphOptions":{"@attributes":{"graphVisible":"true"},"initiallyOn":{"@attributes":{"yAccel":"false","yVel":"false","xAccel":"false","xVel":"false","yPos":"true","xPos":"false"}}}},"color":{"red":"0","green":"0","blue":"0"},"xpath":{"calculator":{"@attributes":{"type":"parametric"},"value":"t"}},"ypath":{"calculator":{"@attributes":{"type":"parametric"},"value":"pd"}}}]}}